# Поиск отелей в Telegram

Этот бот позволяет быстро подбирать отели прямо в мессенджере Telegram по различным критериям поиска. 
Попробуйте использовать бот: https://t.me/Easy_Trip_bot

## Особенности

Данный бот позволяет:
* подбирать отели по самой низкой или высокой цене;
* подбирать отели по лучшему соотношению цена/расстояние от центра города;
* просматривать историю своих запросов.

## Requirements

* Python 3.7+
* [pyTelegramBotAPI](https://github.com/eternnoir/pyTelegramBotAPI) – Python Telegram Bot API
* [requests](https://github.com/psf/requests) - библиотека requests

Вы можете установить все зависимости, выполнив следующую команду: `pip install -r requirements.txt`

## Логирование

В скрипте этого бота используется модуль [loguru](https://github.com/Delgan/loguru) для логирования. 
Вы можете настроить параметры логирования отредактировав `bot_logger.add()` в модуле`loaders.py`

## Команды бота

* `/start` - запуск бота, выполняется автоматически при подключении к боту.
* `/help` - список команд и их описание
* `/lowprice` - поиск дешевых отелей
* `/highprice` - поиск дорогих отелей
* `/bestdeal` - лучшие предложения по цене и расстоянию от центра города
* `/history` - история запросов пользователя

## Как работать с ботом Easy_Trip

Список всех команд, поддерживаемых ботом, можно посмотреть по команде `/help`

### Поиск дешевых отелей

1. Введите команду `/lowprice`. Бот запросит город, в котором вы хотите искать отели.
2. Введите название населенного пункта. Бот выполнит запрос к hotels api и выведет список локаций, названия которых похожи на введенный город. 
   Если бот не найдет ни одну локацию, то необходимо начать поиск с ввода команды.
3. Выберите один из предложенных вариантов, наиболее подходящих вашему запросу.
4. Бот запросит денежную единицу для расчета стоимости (`RUB` или `USD`)
5. Бот запросит дату заселения и дату выселения. Выберите нужные в календаре.
6. Бот запросит количество отелей, которые вы хотите вывести в качестве результата. Выберите нужное количество отелей.
7. Бот запросит количество фотографий отелей, которые прикрепляются к результату. Выберите нужное количество.
8. Бот выполнит следующий запрос к hotels api и выведет список отелей с указанием названия, адреса, расстояния от центра и цены за период пребывания.
9. После последнего результата бот отправит список доступных команд.

Пример результата:
![Отель](img\hotel.png)


### Поиск дорогих отелей

1. Для получения списка самых дорогих отелей введите команду `/highprice`и выполните пункты 2 - 9 из инструкции выше для топа дешевых отелей

### Лучшие предложения

1. Введите команду `/bestdeal`. Бот запросит город, в котором вы хотите искать отели.
2. Введите название населенного пункта. Бот выполнит запрос к hotels api и выведет список локаций, названия которых похожи на введенный город. 
   Если бот не найдет ни одну локацию, то необходимо начать поиск с ввода команды.
3. Выберите один из предложенных вариантов, наиболее подходящих вашему запросу.
4. Бот запросит денежную единицу для расчета стоимости (`RUB` или `USD`)
5. Бот запросит диапазон цен на отели двумя отдельными сообщениями. Сначала введите минимальное значение, а после подтверждения максимальное. если введенное значение не подойдет под нужный формат записи, бот запросит значение ещё раз.
6. Бот запросит диапазон расстояний от центра города до отеля. Сначала введите минимальное значение, а после подтверждения максимальное. если введенное значение не подойдет под нужный формат записи, бот запросит значение ещё раз.
7. Бот запросит дату заселения и дату выселения. Выберите нужные в календаре.
8. Бот запросит количество отелей, которые вы хотите вывести в качестве результата. Введите количество отелей. 
9. Бот запросит количество фотографий отелей, которые прикрепляются к результату. Выберите нужное количество.
10. Бот выполнит следующий запрос к hotels api и выведет список отелей с указанием названия, адреса, расстояния от центра и цены за период пребывания.

### История запросов

1. Введите команду `/history`.
2. Бот сделает запрос к базе данных в директории и в случае совпадения id пользователя с хранящимися данными выведет информацию о 5 последних запросах и их результаты.

### Рекомендации 

- Название города должно состоять только из букв русского или английского алфавита и символа дефис.
- Цены представляет собой целые положительные числа.
- Максимальное расстояние от центра города должно быть написано в виде положительного целого или вещественного числа.
- Количество выводимых отелей — целое положительное число. Максимальное возможное количество - 10 (лучше воспользоваться всплывающей клавиатурой), при вводе числа больше 10 бот отправит 10 отелей.
- Количество прикрепляемых фотографий — целое положительное число. Максимальное возможное количество - 5 (лучше воспользоваться всплывающей клавиатурой), при вводе числа больше 5 бот прикрепит 5 фотографий.